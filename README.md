# 블록체인 기본 원리 튜토리얼

## 📁 파일명
`blockchain_tutorial.py`

## 🎯 개요
이 튜토리얼은 블록체인의 핵심 개념을 가장 간단한 파이썬 코드로 구현하여 이해를 돕는 교육용 프로그램입니다.

---

## 📚 블록체인 핵심 개념

### 1. 블록(Block)이란?
블록은 여러 거래(transaction)들을 묶어놓은 데이터 묶음입니다.

**블록의 구성 요소:**
- **index**: 블록의 순서 번호
- **timestamp**: 블록이 생성된 시간
- **transactions**: 블록에 포함된 거래 목록
- **previous_hash**: 이전 블록의 해시값 (체인 연결의 핵심!)
- **hash**: 현재 블록의 고유 해시값
- **nonce**: 작업증명을 통해 찾아낸 특별한 숫자

### 2. 체인(Chain) 구조
```
[제네시스 블록] → [블록 1] → [블록 2] → [블록 3] → ...
      ↑              ↑          ↑          ↑
   previous_hash = 0  ←────── ←────── ←──────
```

각 블록은 이전 블록의 해시값을 포함하므로:
- **중간 블록을 변조하면 해시가 바뀜**
- **다음 블록의 previous_hash와 맞지 않아 변조 탐지 가능**

### 3. 해싱(Hashing)
- 입력 데이터를 고정 길이의 문자열로 변환하는 과정
- 같은 입력 → 같은 해시
- 조금이라도 다른 입력 → 완전히 다른 해시
- **블록의 무결성을 보장하는 핵심 기술**

### 4. 작업증명(Proof of Work)
- 새로운 블록을 생성하기 위해 계산 문제를 풀어야 하는 과정
- 이 코드에서는 "해시값이 '0000'으로 시작하는 nonce 찾기"
- **채굴(Mining)**: 이 계산 과정을 통해 블록을 생성하는 것

---

## 🚀 사용 방법

### 설치 및 실행

1. **파일 저장**
   ```bash
   # blockchain_tutorial.py로 파일 저장
   ```

2. **실행**
   ```bash
   python blockchain_tutorial.py
   ```

### 실행 결과 해석

#### 1. 제네시스 블록 생성
```
제네시스 블록이 생성되었습니다!
```
- 블록체인의 첫 번째 블록이 자동으로 생성됩니다.

#### 2. 거래 추가
```
거래 추가: Alice -> Bob: 10
거래 추가: Bob -> Charlie: 5
```
- 아직 블록에 포함되지 않은 "대기 중인 거래"가 추가됩니다.

#### 3. 작업증명 과정
```
작업증명 시작... (해시 앞 4자리가 '0000'인 nonce 찾는 중)
시도 횟수: 10000...
시도 횟수: 20000...
작업증명 완료! nonce: 23847, 해시: 0000a1b2c3d4e5f6...
```
- 컴퓨터가 수천~수만 번의 계산을 통해 올바른 nonce를 찾습니다.
- **이것이 블록체인의 "작업"입니다!**

#### 4. 블록 생성 완료
```
새 블록 #1 생성 완료! (nonce: 23847)
```

#### 5. 최종 블록체인 구조
```
📦 블록 #0 (제네시스 블록)
   이전 블록 해시: 0
   현재 블록 해시: abc123...
   ⬇️  (다음 블록과 연결)

📦 블록 #1
   거래 내역:
     • Alice -> Bob: 10
     • Bob -> Charlie: 5
   이전 블록 해시: abc123... (블록 #0의 해시)
   현재 블록 해시: def456...
```

---

## 🧪 실험해보기

### 1. 난이도 조절
`proof_of_work()` 메서드의 조건을 변경해보세요:

```python
# 쉽게 만들기 (빠른 채굴)
if hash_value.startswith('00'):  # 0이 2개

# 어렵게 만들기 (느린 채굴)
if hash_value.startswith('00000'):  # 0이 5개
```

### 2. 더 많은 거래 추가
```python
blockchain.new_transaction("사용자1", "사용자2", 100)
blockchain.new_transaction("사용자2", "사용자3", 50)
# ... 더 많은 거래 추가
```

### 3. 블록체인 검증 기능 추가
```python
def validate_chain(self):
    """전체 체인의 유효성 검사"""
    for i in range(1, len(self.chain)):
        current_block = self.chain[i]
        previous_block = self.chain[i-1]
        
        # 현재 블록의 해시가 올바른지 확인
        if current_block['hash'] != self.hash(current_block):
            return False
        
        # 이전 블록과의 연결이 올바른지 확인
        if current_block['previous_hash'] != previous_block['hash']:
            return False
    
    return True
```

---

## 🔍 핵심 포인트 정리

### ✅ 배우게 되는 것들

1. **체인 구조의 의미**
   - 각 블록이 이전 블록을 참조하여 순서가 보장됨
   - 중간 블록 변조 시 체인 전체에서 불일치 발생

2. **해싱의 역할**
   - 데이터 무결성 보장
   - 작은 변경도 완전히 다른 해시 생성

3. **작업증명의 목적**
   - 블록 생성에 비용(시간, 전력) 발생
   - 악의적 공격을 경제적으로 비현실적으로 만듦

4. **분산 시스템의 기초**
   - 중앙 관리자 없이도 데이터 무결성 유지 가능
   - 합의 메커니즘의 기본 원리

### 🚫 실제 블록체인과의 차이점

이 튜토리얼은 교육용이므로 실제 블록체인과는 다음과 같은 차이가 있습니다:

- **네트워크 기능 없음**: 단일 컴퓨터에서만 동작
- **간단한 거래 구조**: 실제로는 디지털 서명, 수수료 등이 필요
- **고정된 난이도**: 실제로는 네트워크 상황에 따라 난이도 조절
- **보안 기능 부족**: 실제로는 더 복잡한 암호학적 보안 필요

---

## 🎓 다음 단계

이 기본 개념을 이해했다면:

1. **머클 트리(Merkle Tree)** 구현해보기
2. **디지털 서명** 추가하기
3. **네트워크 통신** 기능 구현하기
4. **비트코인, 이더리움** 등 실제 블록체인 분석하기
